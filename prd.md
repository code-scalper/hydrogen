# Hydrogen Station Scenario Simulator PRD

## 1. 개요

Hydrogen Station Scenario Simulator는 수소충전소의 SFC(Station Functional Component)별 입력값을 기반으로 시나리오를 구성하고, 시간 단위 시뮬레이션 결과를 시각적으로 제공하는 데스크톱 애플리케이션이다. 사용자는 경제성 평가, What-if 분석, 리포트 자동화를 통해 운영 의사결정을 신속하게 내릴 수 있다. 실제 시뮬레이션 계산은 외부 `.exe` 모듈과 연동하여 `Input_Total.xlsx`에 값을 전달하고 결과 파일을 수신한다.

## 2. 제품 목표

- 다양한 SFC 시나리오 입력을 통해 충전소 운영 전략을 수립한다.
- 시간별 수요·공급, 장비 가동률 등의 주요 지표를 직관적으로 파악한다.
- 경제성 및 민감도(What-if) 분석으로 투자 및 운영 효율을 정량화한다.
- 버튼 한 번으로 표준화된 리포트를 생성하여 이해관계자 공유를 단순화한다.

## 3. 주요 사용자 및 사용 시나리오

- **운영 관리자**: 피크 수요 대비 설비 용량 검토, 가동 일정 조정.
- **투자/사업 기획자**: CAPEX/OPEX 입력값 변경을 통한 경제성 평가.
- **엔지니어**: 특정 SFC 파라미터(압력, 충전 속도 등) 조정 후 결과 비교.

## 4. 핵심 기능 요구사항

1. **시나리오 관리**
   - SFC별 입력 필드(장치 용량, 운영 시간, 비용 등)를 등록/편집/저장.
   - 시나리오 복제 및 버전 관리.
2. **실시간 시각화 대시보드**
   - 시간대별 충전 수요·공급량, 장비 가동률, 에너지 사용량 그래프.
   - KPI 카드: 일별/주별 수익, 가동시간, 대기시간 등.
3. **경제성 및 What-if 분석**
   - CAPEX, OPEX, 정부 지원금 입력 및 NPV, IRR, 회수기간 계산.
   - 주요 변수(가격, 수요, 효율)의 민감도 분석 자동 수행.
4. **리포트 생성**
   - 시나리오 요약, 그래프, 경제성 결과를 포함한 PDF/Excel 리포트 생성.
   - 리포트 템플릿 커스터마이징 옵션.
5. **외부 시뮬레이터 연동**
   - 입력값을 `third-party/Input_Total.xlsx`의 지정 셀에 매핑.
   - `.exe` 실행을 트리거하고 결과 CSV/Excel을 `output/` 폴더에서 수신.
   - 실행 실패 시 재시도 및 오류 로깅 제공.

## 5. 데이터 흐름 & 통합

1. 사용자 입력 → 앱 상태(Zustand) 저장 → Excel 매핑.
2. `.exe` 실행 → 결과 파일 생성(`Output_*.csv`) → 앱으로 로드.
3. 결과 파싱 → 그래프/표 렌더링 → 보고서 생성기 전달.
4. 모든 시나리오 및 결과는 로컬 저장소(Electron Store 등)에 캐싱.

## 6. UI/UX 요구사항

- 한 화면에서 핵심 KPI와 그래프를 동시에 확인할 수 있는 레이아웃.
- SFC 입력 패널은 단계별(기본 정보 → 설비 → 비용) 폼 구성.
- What-if 결과는 baseline 대비 증감(%)을 색상으로 표현.
- 리포트 생성 버튼을 상단 고정 배치, 진행 상태 표시.
- Windows 우선 디자인, 향후 크로스플랫폼 고려.

## 7. 비기능 요구사항

- 실행 파일 및 결과 파일 접근은 Windows 전용 경로 고려.
- 시뮬레이션 실행 시간: 단일 시나리오 당 60초 이내 목표.
- 실패 로그와 사용자 알림(Toast/Dialog) 제공.
- 민감한 데이터(비용, 수요)는 암호화된 로컬 저장 또는 사용 후 삭제.

## 8. 측정 지표

- 월간 활성 사용자 수.
- 사용자당 시나리오 생성/재실행 횟수.
- 리포트 생성 성공률 및 평균 생성 시간.
- 시뮬레이션 실패율(재시도 포함)과 평균 처리 시간.

## 9. 범위 및 우선순위

- **MVP**: 시나리오 입력/저장, `.exe` 연동, 기본 그래프, 경제성 계산, PDF 리포트.
- **차기 릴리스**: 다중 시나리오 비교, 팀 공유 워크플로, API 연동.

## 10. 리스크 및 가정

- 외부 `.exe`와 `Input_Total.xlsx` 구조가 변경되지 않는다고 가정.
- Windows 외 OS 지원은 제한적일 수 있으며 개발 리소스에 따라 결정.
- 사용자 입력 오류(단위, 범위)에 대한 검증 로직 필요.

## 11. 일정(초안)

- 요구사항 확정: 1주
- UI 프로토타입 및 검증: 2주
- 구현(MVP): 6주
- 통합 테스트 & 리포트 검증: 2주
- 베타 릴리스: 총 11주 내 완료 목표
